<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>学IT - 后台管理系统</title>
    <?php  include "/views/public/css.html"?> 
       
</head>
<body>
    <!-- 登录 -->
    <div class="login">
        <div class="login-wrap">
            <div class="avatar">
                <img src="/views/static/uploads/monkey.png" class="img-circle" alt="">
            </div>
            <form action="" id="login-form"class="col-xs-offset-1 col-xs-10">
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">
                        <i class="fa fa-user"></i>
                    </span>
                    <input type="text" id="username" class="form-control" name="tc_name" placeholder="用户名">
                </div>
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">
                        <i class="fa fa-key"></i>
                    </span>
                    <input type="password" id="password" class="form-control" name="tc_pass" placeholder="密码">
                </div>
                <button type="submit" class="btn btn-lg btn-primary btn-block">登 录</button>
            </form>
        </div>
    </div>
    
    <?php include "/views/public/js.html" ?>

    <script>
    // $(function () {
    //      // 获取登录按钮并点击注册事件
    //     $("#login-form").submit(function () {
    //         // 获取到用户传入的值
    //         var userName = $("#username").val();
    //         var passWord = $("#password").val();
    //         // 用户点击按钮，向后台发送请求
    //         $.ajax({
    //             url:"/api/login",
    //             type:"post",
    //             data:{
    //                 tc_name:userName,
    //                 tc_pass:passWord
    //             },
    //             success:function(data){ 
    //                 console.log(data);   
    //                 if(data.code == 200){
    //                     // 将用户的头像和用户信息放入cookie中，首页中使用
    //                     // $.cookie("userinfo") 直接存储数据到cookie中打印出来的是[object Object]
    //                     $.cookie("userinfo",JSON.stringify(data.result),{path:"/"});
    //                     // 跳转页面
    //                     location.href = "/";
    //                 }         
    //             }      
    //         });
    //         return false;
    //     });
    // }); 

        //    第二种:
        $("#login-form").submit(function(){
            $(this).ajaxSubmit({
                url:"/api/login",
                type:"post",
                success:function(data){
                    if(data.code == 200 ){
                        $.cookie("userinfo",JSON.stringify(data.result),{path:"/"});
                        location.href = "/";
                    }
                }
            });
            return false;
        }) 
    </script>
    
</body>
</html>